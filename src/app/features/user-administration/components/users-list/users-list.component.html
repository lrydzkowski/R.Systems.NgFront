<div class="card relative p-3">
  <h2 class="mb-3" i18n>Users</h2>
  <div #tableContainer class="relative">
    <p-table  #dt
              tableStyleClass="custom-table"
              [columns]="cols"
              [value]="users"
              styleClass="p-datatable-sm p-datatable-gridlines p-datatable-striped"
              [paginator]="true"
              [rowsPerPageOptions]="[10,25,50]"
              [rows]="50"
              sortMode="multiple"
              [scrollable]="true"
              [scrollHeight]="tableHeightCalculator.tableMaxHeightPx + 'px'">
      <ng-template pTemplate="caption">
        <div class="flex">
          <button pButton
                  label="Clear"
                  class="p-button-outlined"
                  icon="pi pi-filter-slash"
                  (click)="clear(dt)"></button>
        </div>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns" [pSortableColumn]="col.field" [class]="col.className">
            {{col.header}}
            <p-sortIcon [field]="col.field"></p-sortIcon>
            <p-columnFilter type="text"
                            [field]="col.field"
                            display="menu"
                            class="ml-2"></p-columnFilter>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-row let-columns="columns">
        <tr>
          <td *ngFor="let col of columns" [class]="col.className">
            <ng-container [ngSwitch]="col.type">
              <span *ngSwitchCase="'text'">{{row[col.field]}}</span>
              <span *ngSwitchCase="'roles'">{{row[col.field] | userRoles}}</span>
            </ng-container>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <loading-animation [loadingAnimationKey]="loadingAnimationKey"></loading-animation>
</div>